import{d as w,g as x,r as h,c as n,u as e,o as s,w as p,e as l,t as c,f as a,b as C,a as P,N as k,a4 as S,_ as T}from"./app-D4ROwtPn.js";import{N as y}from"./Alert-2BGitVBu.js";import{N as V}from"./Input-wiNYfkua.js";const b="4f966c143be4471e8e512e6f77a34d69",v="c52e9d32c3134ef29b025729427b3334",z=w({__name:"Callback",setup(B){const N=`${x()}/tool/yandex/callback`,d=new URL(window.location.href),u=d.searchParams.get("code"),_=d.searchParams.get("error"),g=d.searchParams.get("error_description"),r=h();return u&&!_&&(async()=>{const o=new URLSearchParams;o.append("grant_type","authorization_code"),o.append("client_id",b),o.append("client_secret",v),o.append("code",u||"");const i=await(await fetch("https://oauth.yandex.com/token",{method:"POST",body:o})).json();r.value=i})(),(o,t)=>!e(u)||e(_)?(s(),n(e(y),{key:0,title:e(_)||"Error",type:"error"},{default:p(()=>[l(c(e(g)),1)]),_:1},8,["title"])):(s(),n(e(k),{key:1,vertical:"",size:"large"},{default:p(()=>{var i,f,m;return[a("p",null,[t[0]||(t[0]=a("b",null,"client_id: ",-1)),l(c(b))]),a("p",null,[t[1]||(t[1]=a("b",null,"client_secret: ",-1)),l(c(v))]),a("p",null,[t[2]||(t[2]=a("b",null,"redirect_uri: ",-1)),l(c(N))]),(i=r.value)!=null&&i.error||(f=r.value)!=null&&f.error_description?(s(),n(e(y),{key:0,title:(m=r.value)==null?void 0:m.error,type:"error"},{default:p(()=>[l(c(r.value.error_description),1)]),_:1},8,["title"])):C("",!0),P(e(k),{vertical:""},{default:p(()=>[t[3]||(t[3]=a("b",null,"refresh_token:",-1)),r.value?(s(),n(e(V),{key:1,type:"textarea",autosize:"",readonly:"",value:r.value.refresh_token},null,8,["value"])):(s(),n(e(S),{key:0}))]),_:1,__:[3]})]}),_:1}))}}),j=T(z,[["__scopeId","data-v-a4c84f2a"]]);export{j as C};
